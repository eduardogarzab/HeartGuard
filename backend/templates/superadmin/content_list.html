{{define "superadmin/content_list.html"}} {{template "layout" .}} {{end}} {{define "superadmin/content_list.html:content"}}
<section class="hg-section">
	<div class="hg-flex-between">
		<h1>Contenido</h1>
		<a href="/superadmin/content/new" class="hg-link-button" role="button">Nuevo contenido</a>
	</div>
	<div class="hg-card">
		<form method="get" action="/superadmin/content" class="hg-form-grid">
			<div class="hg-form-field">
				<label for="filter-search">Buscar</label>
				<input id="filter-search" name="q" value="{{.Data.Filters.Search}}" placeholder="Título, resumen o autor" autocomplete="off" />
			</div>
			<div class="hg-form-field">
				<label for="filter-status">Estatus</label>
				<select id="filter-status" name="status">
					<option value="">Todos</option>
					{{range .Data.Statuses}}
					<option value="{{.Code}}" {{if eq $.Data.Filters.Status .Code}}selected{{end}}>{{if .Label}}{{.Label}}{{else}}{{.Code}}{{end}}</option>
					{{end}}
				</select>
			</div>
			<div class="hg-form-field">
				<label for="filter-category">Categoría</label>
				<select id="filter-category" name="category">
					<option value="">Todas</option>
					{{range .Data.Categories}}
					<option value="{{.Code}}" {{if eq $.Data.Filters.Category .Code}}selected{{end}}>{{if .Label}}{{.Label}}{{else}}{{.Code}}{{end}}</option>
					{{end}}
				</select>
			</div>
			<div class="hg-form-field">
				<label for="filter-type">Tipo</label>
				<select id="filter-type" name="type">
					<option value="">Todos</option>
					{{range .Data.Types}}
					<option value="{{.Code}}" {{if eq $.Data.Filters.Type .Code}}selected{{end}}>{{if .Label}}{{.Label}}{{else}}{{.Code}}{{end}}</option>
					{{end}}
				</select>
			</div>
			<div class="hg-form-actions">
				<button type="submit">Filtrar</button>
				<a href="/superadmin/content" class="hg-link-button hg-button-muted" role="button">Limpiar</a>
			</div>
		</form>
	</div>
</section>

<section class="hg-section">
	<div class="hg-card">
		<div class="hg-table-responsive">
			<table class="hg-table">
				<thead>
					<tr>
						<th>Título</th>
						<th>Estatus</th>
						<th>Categoría</th>
						<th>Tipo</th>
						<th>Autor</th>
						<th>Actualizado</th>
						<th>Publicado</th>
					</tr>
				</thead>
				<tbody>
					{{range .Data.Items}}
					<tr>
						<td>
							<strong><a href="/superadmin/content/{{.ID}}">{{.Title}}</a></strong>
							{{if .Summary}}
							<br /><small>{{.Summary}}</small>
							{{end}}
						</td>
						<td>
							<span class="hg-status-chip {{if eq .StatusCode "published"}}is-success{{else if eq .StatusCode "in_review"}}is-info{{else if eq .StatusCode "archived"}}is-danger{{else if eq .StatusCode "scheduled"}}is-info{{else}}is-warn{{end}}">{{.StatusLabel}}</span>
						</td>
						<td>{{.CategoryLabel}}</td>
						<td>{{.TypeLabel}}</td>
						<td>{{if .AuthorName}}{{.AuthorName}}{{else if .AuthorEmail}}{{.AuthorEmail}}{{else}}—{{end}}</td>
						<td>{{formatTime .UpdatedAt}}</td>
						<td>{{if .PublishedAt}}{{formatTimePtr .PublishedAt}}{{else}}—{{end}}</td>
					</tr>
					{{else}}
					<tr>
						<td colspan="7" class="hg-empty-cell">No hay contenido para mostrar.</td>
					</tr>
					{{end}}
				</tbody>
			</table>
		</div>
	</div>
</section>
{{end}}
